import React, { useEffect } from 'react';
import { useSelector, useDispatch } from 'react-redux';
import { useParams } from 'react-router';
import {
	getProductItem,
	requested,
} from '../../redux/redux-components/product-item-reducer';
import Spinner from '../spinner/spinner';

import './_product-item.scss';

const ProductItem = () => {
	const state = useSelector((state) => state.productItemReducer);
	const dispatch = useDispatch();

	const { id } = useParams();

	useEffect(() => {
		dispatch(requested());

		dispatch(getProductItem(id));
	}, []);

	if (state.loading) {
		return <Spinner />;
	}

	const { name, description, amount, image } = state.item;

	return (
		<div className='product'>
			<div className='product__row'>
				<div className='product__left col-4'>
					<img className='prodcut__img' src={image} alt={name} />
				</div>
				<div className='product__right col-8'>
					<div className='product__right-top'>
						<h3 className='product__header'>{name}</h3>
						<p className='product__description product-text'>
							{description}
						</p>
						<p className='product__amount product-text'>
							Осталось: {amount}
						</p>
					</div>

					<div className='product__right-bottom'>
						<button className='product__btn-favorite'>
							<svg
								width='15'
								height='14'
								viewBox='0 0 15 14'
								fill='none'
								xmlns='http://www.w3.org/2000/svg'>
								<path
									d='M7.57 11.585L7.5 11.655L7.423 11.585C4.098 8.568 1.9 6.573 1.9 4.55C1.9 3.15 2.95 2.1 4.35 2.1C5.428 2.1 6.478 2.8 6.849 3.752H8.151C8.522 2.8 9.572 2.1 10.65 2.1C12.05 2.1 13.1 3.15 13.1 4.55C13.1 6.573 10.902 8.568 7.57 11.585ZM10.65 0.699997C9.432 0.699997 8.263 1.267 7.5 2.156C6.737 1.267 5.568 0.699997 4.35 0.699997C2.194 0.699997 0.5 2.387 0.5 4.55C0.5 7.189 2.88 9.352 6.485 12.621L7.5 13.545L8.515 12.621C12.12 9.352 14.5 7.189 14.5 4.55C14.5 2.387 12.806 0.699997 10.65 0.699997Z'
									fill='#4D2392'
								/>
							</svg>
							В избранное
						</button>
						<button className='product__btn-buy'>
							<svg
								width='16'
								height='17'
								viewBox='0 0 16 17'
								fill='none'
								xmlns='http://www.w3.org/2000/svg'>
								<path
									d='M2.50003 0.9H2.5H1C0.84087 0.9 0.688258 0.963214 0.575736 1.07574C0.463214 1.18826 0.4 1.34087 0.4 1.5C0.4 1.65913 0.463214 1.81174 0.575736 1.92426C0.688258 2.03679 0.84087 2.1 1 2.1H2.03184L2.41226 3.62832L3.91071 11.6104C3.91071 11.6104 3.91071 11.6104 3.91072 11.6105C3.93646 11.7479 4.00943 11.8721 4.117 11.9615C4.22459 12.0509 4.36003 12.0999 4.49991 12.1H4.5H4.60557C4.38829 12.2023 4.18814 12.342 4.01508 12.5151C3.62125 12.9089 3.4 13.443 3.4 14C3.4 14.557 3.62125 15.0911 4.01508 15.4849C4.4089 15.8787 4.94305 16.1 5.5 16.1C6.05695 16.1 6.5911 15.8787 6.98492 15.4849C7.37875 15.0911 7.6 14.557 7.6 14C7.6 13.443 7.37875 12.9089 6.98492 12.5151C6.81186 12.342 6.61171 12.2023 6.39443 12.1H11.6056C11.3883 12.2023 11.1881 12.342 11.0151 12.5151C10.6213 12.9089 10.4 13.443 10.4 14C10.4 14.557 10.6213 15.0911 11.0151 15.4849C11.4089 15.8787 11.943 16.1 12.5 16.1C13.057 16.1 13.5911 15.8787 13.9849 15.4849C14.3787 15.0911 14.6 14.557 14.6 14C14.6 13.443 14.3787 12.9089 13.9849 12.5151C13.8119 12.342 13.6117 12.2023 13.3944 12.1H13.5H13.5001C13.64 12.0999 13.7754 12.0509 13.883 11.9615C13.9906 11.8721 14.0635 11.7479 14.0893 11.6104C14.0893 11.6104 14.0893 11.6104 14.0893 11.6104L15.5893 3.61043L15.5893 3.6104C15.6055 3.5238 15.6024 3.4347 15.5803 3.34942C15.5582 3.26414 15.5176 3.18478 15.4614 3.11696C15.4051 3.04915 15.3346 2.99456 15.2549 2.95706C15.1752 2.91956 15.0882 2.90008 15.0001 2.9H15H3.46809L3.08203 1.3548C3.08202 1.35479 3.08202 1.35477 3.08202 1.35476C3.04962 1.22492 2.97475 1.10963 2.8693 1.02723C2.76385 0.944821 2.63387 0.900037 2.50003 0.9ZM4.99799 10.9L3.7225 4.1H14.2775L13.002 10.9H4.99799ZM5.5 13.1C5.73869 13.1 5.96761 13.1948 6.1364 13.3636C6.30518 13.5324 6.4 13.7613 6.4 14C6.4 14.2387 6.30518 14.4676 6.1364 14.6364C5.96761 14.8052 5.73869 14.9 5.5 14.9C5.26131 14.9 5.03239 14.8052 4.8636 14.6364C4.69482 14.4676 4.6 14.2387 4.6 14C4.6 13.7613 4.69482 13.5324 4.8636 13.3636C5.03239 13.1948 5.26131 13.1 5.5 13.1ZM12.5 13.1C12.7387 13.1 12.9676 13.1948 13.1364 13.3636C13.3052 13.5324 13.4 13.7613 13.4 14C13.4 14.2387 13.3052 14.4676 13.1364 14.6364C12.9676 14.8052 12.7387 14.9 12.5 14.9C12.2613 14.9 12.0324 14.8052 11.8636 14.6364C11.6948 14.4676 11.6 14.2387 11.6 14C11.6 13.7613 11.6948 13.5324 11.8636 13.3636C12.0324 13.1948 12.2613 13.1 12.5 13.1Z'
									fill='#F9F7FD'
									stroke='#F9F7FD'
									stroke-width='0.2'
								/>
							</svg>
							В корзину
						</button>
					</div>
				</div>
			</div>
		</div>
	);
};

export default ProductItem;
